# ðŸ§¾ DocumentaciÃ³n tÃ©cnica â€” DÃ­a 1 Â· Proyecto Reprodisseny

## âœ… Objetivos trabajados

- InstalaciÃ³n y configuraciÃ³n base de Nuxt 3
- Reemplazo de `nuxt-seo-kit` por implementaciÃ³n personalizada SEO
- ConfiguraciÃ³n global del SEO en `nuxt.config.ts`
- InstalaciÃ³n y registro de `@pinia/nuxt` + creaciÃ³n de store
- Carga dinÃ¡mica del menÃº desde contenido usando `queryCollection`
- CreaciÃ³n del store `useCategoriasStore`
- InyecciÃ³n del menÃº en `default.vue` y renderizado del componente `UiMegaMenu`
- PreparaciÃ³n para `schema.org` y uso de `@vueuse/schema-org`
- MigraciÃ³n Node.js a versiÃ³n 20
- RevisiÃ³n de errores de build (aliases, mÃ³dulos, dependencias)
- Debug del componente `UiMegaMenu`
- ConfiguraciÃ³n de entorno y limpieza de ramas en Git (`refactor` â†’ `dev`)

---

## ðŸ› ï¸ Archivos clave creados o modificados

### 1. `nuxt.config.ts`

```ts
modules: [
  '@nuxt/content',
  '@nuxtjs/tailwindcss',
  '@nuxtjs/color-mode',
  '@pinia/nuxt',
  '@nuxt/icon',
  '@nuxt/image',
  '@vueuse/schema-org'
],
runtimeConfig: {
  public: {
    siteUrl: process.env.NUXT_PUBLIC_SITE_URL || 'http://localhost:3000'
  }
},
app: {
  head: {
    titleTemplate: '%s Â· Reprodisseny',
    meta: [...],
    link: [{ rel: 'icon', href: '/favicon.ico' }]
  }
}

2. stores/categorias.ts
import { defineStore } from 'pinia'
import { queryCollection } from '#content/server'

export const useCategoriasStore = defineStore('categorias', {
  state: () => ({
    menu: [] as any[],
    loaded: false
  }),
  actions: {
    async fetchCategorias() {
      if (this.loaded) return
      const raw = await queryCollection('categorias').where('type', '=', 'categoria').all()
      this.menu = raw.map((cat: any) => ({
        ...cat,
        children: cat.children?.map((c: any) => ({
          ...c,
          children: c.children || []
        })) || []
      }))
      this.loaded = true
    }
  }
})

3. layouts/default.vue
<script setup lang="ts">
import { useCategoriasStore } from '~/stores/categorias'
const categoriasStore = useCategoriasStore()
onMounted(() => categoriasStore.fetchCategorias())
</script>

<template>
  <UiMegaMenu v-if="categoriasStore.loaded" :categorias="categoriasStore.menu" />
</template>

4. components/SharedMenu.vue
<template>
  <nav>
    <ul>
      <li v-for="categoria in categorias" :key="categoria.slug">
        {{ categoria.title || categoria.slug }}
      </li>
    </ul>
  </nav>
</template>

<script setup lang="ts">
const props = defineProps<{ categorias: any[] }>()
</script>

